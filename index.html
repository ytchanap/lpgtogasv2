<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ç“¶æ”¹ç®¡ç»æµæˆæœ¬æµ‹ç®—</title>
    <style>
        body {font-family: 'Microsoft YaHei', Arial; max-width: 800px; margin: 20px auto; padding: 20px}
        .container {background: #f8fafc; border: 1px solid #e2e8f0; padding: 25px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.05)}
        h2 {color: #1e293b; border-bottom: 2px solid #3b82f6; padding-bottom: 12px; margin-bottom: 20px}
        .input-group {margin: 18px 0}
        label {display: inline-block; width: 300px; font-weight: 500; color: #475569}
        input {width: 180px; padding: 8px; border: 2px solid #cbd5e1; border-radius: 6px; float: right; transition: 0.3s}
        input:focus {border-color: #3b82f6; outline: none}
        button {background: #3b82f6; color: white; padding: 12px 28px; border: none; border-radius: 6px; cursor: pointer; transition: 0.3s; float: right; font-weight: 500}
        button:hover {background: #2563eb}
        .result {margin-top: 30px; padding: 25px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.08)}
        .result h3 {color: #3b82f6; margin-top: 0; font-size: 20px}
        .result-item {margin: 15px 0; font-size: 16px; padding: 12px; border-radius: 6px}
        .positive {background: #dcfce7; color: #166534}
        .negative {background: #fee2e2; color: #991b1b}
        .unit {color: #64748b; font-size: 0.9em}
    </style>
</head>
<body>
    <div class="container">
        <h2>ç“¶æ”¹ç®¡ç»æµæˆæœ¬æµ‹ç®—å·¥å…·</h2>
        
        <div class="input-group">
            <label>æ¶²åŒ–æ°”æœˆç”¨é‡ï¼ˆç“¶/æœˆï¼‰<span class="unit">ï¼ˆæ¯ç“¶50kgï¼‰</span>:</label>
            <input type="number" id="lpgAmount" step="1" min="1" required>
        </div>
        <div class="input-group">
            <label>æ¶²åŒ–æ°”å•ä»·ï¼ˆå…ƒ/ç“¶ï¼‰<span class="unit">ï¼ˆå½“å‰å¸‚åœºä»·æ ¼ï¼‰</span>:</label>
            <input type="number" id="lpgPrice" step="1" min="1" required>
        </div>
        <div class="input-group">
            <label>å¤©ç„¶æ°”ä»·æ ¼ï¼ˆå…ƒ/mÂ³ï¼‰<span class="unit">ï¼ˆå«æ‰€æœ‰è´¹ç”¨ï¼‰</span>:</label>
            <input type="number" id="ngPrice" step="0.1" min="0.1" required>
        </div>
        <div class="input-group">
            <label>æ”¹é€ å·¥ç¨‹æŠ•èµ„ï¼ˆå…ƒï¼‰<span class="unit">ï¼ˆåˆè£…è´¹ã€è®¾å¤‡è´¹ï¼‰</span>:</label>
            <input type="number" id="ngInvestment" step="1000" min="0" required>
        </div>
        
        <button onclick="calculate()">å¼€å§‹æµ‹ç®—</button>
        
        <div class="result">
            <h3>æµ‹ç®—ç»“æœåˆ†æ</h3>
            <div class="result-item positive">
                ğŸº æ¶²åŒ–æ°”æœˆæˆæœ¬: <strong><span id="lpgCost">-</span></strong> å…ƒ
            </div>
            <div class="result-item positive">
                ğŸ”¥ å¤©ç„¶æ°”æœˆæˆæœ¬: <strong><span id="ngCost">-</span></strong> å…ƒ
            </div>
            <div class="result-item" id="savingLine">
                ğŸ’° æ¯æœˆèŠ‚çº¦æˆæœ¬: <strong><span id="saving">-</span></strong> å…ƒ
            </div>
            <div class="result-item" id="rateLine">
                ğŸ“Š æˆæœ¬èŠ‚çº¦ç‡: <strong><span id="savingRate">-</span>%</strong>
            </div>
            <div class="result-item" id="paybackLine">
                â³ æŠ•èµ„å›æœ¬æœŸ: <strong><span id="payback">-</span></strong>
            </div>
            <div class="result-item positive">
                ğŸŒ³ å¹´å‡ç¢³æ•ˆæœ â‰ˆ ç§æ¤ <strong><span id="trees">-</span></strong> æ£µæ ‘
            </div>
        </div>
    </div>

    <script>
        function calculate() {
            // è¾“å…¥éªŒè¯
            const inputs = document.querySelectorAll('input[required]');
            let isValid = true;
            inputs.forEach(input => {
                input.style.borderColor = '#cbd5e1';
                if (!input.value || parseFloat(input.value) < input.min) {
                    isValid = false;
                    input.style.borderColor = '#ef4444';
                }
            });
            if (!isValid) return alert("è¯·å¡«å†™æ‰€æœ‰æœ‰æ•ˆæ•°å€¼ï¼ˆå¿…é¡»å¤§äº0ï¼‰");

            // è·å–è¾“å…¥å€¼
            const lpgBottles = parseFloat(document.getElementById('lpgAmount').value);
            const lpgPrice = parseFloat(document.getElementById('lpgPrice').value);
            const ngPrice = parseFloat(document.getElementById('ngPrice').value);
            const ngInvestment = parseFloat(document.getElementById('ngInvestment').value);

            // åŸºç¡€å¸¸æ•°
            const LPG_ENERGY = 45;     // MJ/kg
            const NG_ENERGY = 36;      // MJ/mÂ³
            const LPG_EFFICIENCY = 0.85;
            const NG_EFFICIENCY = 0.91;
            const LPG_KG_PER_BOTTLE = 50;
            const CO2_PER_TREE = 18;   // æ¯æ£µæ ‘å¹´å¸æ”¶é‡18kg

            // çƒ­å€¼æ¢ç®—è®¡ç®—
            const effectiveLpgEnergy = lpgBottles * LPG_KG_PER_BOTTLE * LPG_ENERGY * LPG_EFFICIENCY;
            const requiredNgVolume = effectiveLpgEnergy / (NG_ENERGY * NG_EFFICIENCY);

            // æˆæœ¬è®¡ç®—
            const lpgMonthlyCost = lpgBottles * lpgPrice;
            const ngMonthlyCost = Math.round(requiredNgVolume * ngPrice);
            const monthlySaving = lpgMonthlyCost - ngMonthlyCost;
            const savingRate = monthlySaving > 0 ? 
                Math.round((monthlySaving / lpgMonthlyCost) * 100) : 
                Math.round((monthlySaving / ngMonthlyCost) * 100);

            // å›æœ¬æœŸè®¡ç®—
            let paybackPeriod = 'âˆ';
            if (monthlySaving > 0) {
                const totalMonths = ngInvestment / monthlySaving;
                const years = Math.floor(totalMonths / 12);
                const months = Math.ceil(totalMonths % 12);
                paybackPeriod = years > 0 ? `${years}å¹´${months}æœˆ` : `${months}æœˆ`;
            }

            // å‡ç¢³è®¡ç®—
            const CO2_LPG = 3.1013;   // kg CO2/kgæ¶²åŒ–æ°”
            const CO2_NG = 1.9643;    // kg CO2/mÂ³å¤©ç„¶æ°”
            const annualCarbonKg = (
                (lpgBottles * LPG_KG_PER_BOTTLE * CO2_LPG) - 
                (requiredNgVolume * CO2_NG)
            ) * 12;  // åƒå…‹/å¹´
            const trees = Math.max(Math.round(annualCarbonKg / CO2_PER_TREE), 0);

            // æ˜¾ç¤ºç»“æœ
            document.getElementById('lpgCost').textContent = lpgMonthlyCost.toLocaleString('zh-CN');
            document.getElementById('ngCost').textContent = ngMonthlyCost.toLocaleString('zh-CN');
            document.getElementById('saving').textContent = Math.abs(monthlySaving).toLocaleString('zh-CN');
            document.getElementById('savingRate').textContent = Math.abs(savingRate);
            document.getElementById('payback').textContent = paybackPeriod;
            document.getElementById('trees').textContent = trees;

            // åŠ¨æ€æ ·å¼è®¾ç½®
            const setStyle = (element, value) => {
                element.className = `result-item ${value >= 0 ? 'positive' : 'negative'}`;
            }
            setStyle(document.getElementById('savingLine'), monthlySaving);
            setStyle(document.getElementById('rateLine'), savingRate);
            document.getElementById('paybackLine').className = 
                `result-item ${paybackPeriod !== 'âˆ' ? 'positive' : 'negative'}`;
        }
    </script>
</body>
</html>